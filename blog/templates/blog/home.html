{% extends "blog/base.html" %}

{% block title %}Blog | ThoufEdu{% endblock %}

{% block content %}
  {% if featured_post %}
    <section class="featured">
      <article class="featured__card">
        <div class="featured__content">
          <p class="featured__eyebrow">Featured</p>
          <h1 class="featured__title">
            <a href="{% url 'blog_detail' featured_post.slug %}">{{ featured_post.title }}</a>
          </h1>
          <p class="featured__excerpt">
            {{ featured_post.summary|truncatechars:140 }}
          </p>
          <div class="featured__meta">
            <span class="author">{{ site_author }}</span>
            <span class="date">{{ featured_post.created_at|date:"M j, Y" }}</span>
          </div>
        </div>
        <div class="featured__media">
          {% if featured_post.header_image %}
            <img class="media media--large media--img" src="{{ featured_post.header_image.url }}" alt="{{ featured_post.title }}">
          {% else %}
            <div class="media media--large"></div>
          {% endif %}
        </div>
      </article>
    </section>
  {% endif %}

  {% if grid_posts %}
    <section class="grid">
      {% for post in grid_posts %}
        <article class="card">
          {% if post.header_image %}
            <img class="media media--img" src="{{ post.header_image.url }}" alt="{{ post.title }}">
          {% else %}
            <div class="media"></div>
          {% endif %}
          <div class="card__body">
            <h2 class="card__title">
              <a href="{% url 'blog_detail' post.slug %}">{{ post.title }}</a>
            </h2>
            <p class="card__excerpt">{{ post.summary|truncatechars:120 }}</p>
            <div class="card__meta">
              <span class="author">{{ site_author }}</span>
              <span class="date">{{ post.created_at|date:"M j, Y" }}</span>
            </div>
          </div>
        </article>
      {% endfor %}
    </section>
  {% elif not featured_post %}
    <div class="empty">
      <p>No published posts yet.</p>
    </div>
  {% endif %}
{% endblock %}
